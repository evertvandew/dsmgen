<!doctype html>
<html>

<head>
<meta charset="utf-8">
<script type="text/javascript" src="brython.js"></script>
<script type="text/javascript" src="brython_stdlib.js"></script>
</head>

<body onload="brython(1)">
    <button id="NormalEditBtn">Normal</button><button id="EditConnectionsBtn">Connect</button>
    <svg id="canvas" width="100%" height="500px"
        style="border-color:#000;border-style:solid;border-width:1px;margin-left:0px;">
          <defs>
            <marker id="startarrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
              <polygon points="10 0, 10 7, 0 3.5" fill="black" />
            </marker>
            <marker id="endarrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" markerUnits="strokeWidth">
                <polygon points="0 0, 10 3.5, 0 7" fill="black" />
            </marker>
            <marker id="startarrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
              <polygon points="10 0, 10 7, 0 3.5" fill="black" />
            </marker>
            <marker id="endarrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" markerUnits="strokeWidth">
                <polygon points="0 0, 10 3.5, 0 7" fill="black" />
            </marker>
         </defs>
    </svg>

    <div style="float:left; width=40%;"><h1>Properties</h1><div id="properties" /></div>
    </div>

    <script type="text/python">
        from browser import document, console, html
        import diagrams
        from property_editor import dataClassEditor

        diagrams.createDiagram("canvas", "properties");

        # Add the logic to edit parameters
        # When a block is selected, the canvas throws an event with the details
        def onBlockSelected(ev):
            # Clear any remnants of a previous properties editor
            properties_div = document['properties']
            for e in properties_div.children:
                e.remove()
            properties_div <= dataClassEditor(ev.detail.object, update=ev.detail.update)

        canvas = document['canvas']
        canvas.bind('shape_selected', onBlockSelected)
    </script>

</body>

</html>