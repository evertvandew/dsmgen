<!doctype html>
<html>

<head>
<meta charset="utf-8">
<script type="text/javascript" src="/src/brython.js"></script>
<script type="text/javascript" src="/src/brython_stdlib.js"></script>
</head>

<body onload="brython(1)">
    <svg id="canvas" width="100%" height="700px"
    </svg>

    <script type="text/python">
        from browser import document, console, html, window
        import diagrams
        from property_editor import dataClassEditor
        import shapes

        diagrams.createDiagram("canvas");
        diagram = diagrams.diagrams[0]

        all_shapes = shapes.BasicShape.getShapeTypes()
        # Can't display the various textwidgets
        all_shapes = [s for s in all_shapes if s.getType() != 'textwidget']
        console.log(all_shapes)
        #all_shapes = [s for s in all_shapes if s.getType() == 'bar']
        for i, b in enumerate(all_shapes):
            x, y = 100 + 200 * (i%5), 100 + 100 * (i // 5)
            console.log(f"Creating instance of {b.getType()}")
            diagram.drop(shapes.Shape(x=x, y=y, width=100, height=40, name=b.getType(), shape_type=b.getType()))

    </script>
</body>

</html>